# 安全与治理

## 总体策略

你选择了“全功能直开”，因此必须默认启用强约束安全策略。

## SQL 节点

- 仅允许使用项目内已绑定的 MySQL 连接器。
- 配置执行超时、结果集上限、并发上限。
- 默认禁用高风险语句（如全表无条件删除），通过白名单放开。

## Python 节点

- 使用受限执行环境（最小内置对象）。
- 模块导入白名单。
- 配置 CPU/内存/超时限制。

## Shell 节点

- 命令模板白名单。
- 参数严格模板化，不允许自由拼接危险字符。
- 运行目录限制在受控路径。

## Postgres 兼任缓存/队列时的治理

- `runtime_kv` 与 `job_queue` 均设置 TTL 清理任务。
- 关键表使用行级锁防止并发冲突。
- 监控指标：队列堆积、锁等待、慢查询、失败率。

## 审计与追踪

- 每次执行记录操作者、触发来源、输入变量摘要。
- 每个步骤记录开始/结束时间、状态、输出摘要、错误码。
- 对敏感值做脱敏展示。
