# 路线图与迁移计划

## Phase 1: 存储与模型升级

- 从 SQLite 迁移到 PostgreSQL。
- 引入 `projects` 与 `project_id` 外键链路。
- 将现有规则、节点、执行记录迁移到新模型。

验收标准：

- 现有规则可无损读取与运行。
- 项目维度下规则查询正确隔离。

## Phase 2: 节点能力扩展

- 新增 `python`、`shell`、`load` 节点。
- 引入 `connectors`（MySQL/Redis）。
- YAML 配置系统接入并完成环境变量覆盖。

验收标准：

- 在测试项目中成功运行 SQL/Python/Shell 混合规则。
- 规则可写入并读取项目级/规则级数据。

## Phase 3: 执行治理与可观测

- 上线统一错误码与告警。
- 增加执行报表、失败重试与幂等控制。
- 评估 Postgres 队列容量，必要时引入独立 Redis。

验收标准：

- 可定位 95% 执行失败原因。
- 并发压测下无明显锁灾难与队列阻塞。

## 迁移注意事项

- 迁移脚本必须可回滚。
- 迁移期间保持只读窗口或双写策略。
- 对历史 `stored_data` 做字段补齐（project_id/scope）。
